// @generated by tools/content-build/build-resources-registry.mjs
// source: content\packs\base\resources\resources.base.json

export type AtomSymbol = 'H' | 'C' | 'O' | 'Si' | 'Fe'

const resourceCatalogData = [
  {
    "id": "rubble",
    "label": "Asteroid Rubble",
    "unit": "chunks",
    "description": "Crushed asteroid mix containing minerals, ice, and waste.",
    "atomVector": {
      "H": 0.4,
      "C": 0.16,
      "O": 1.8,
      "Si": 0.4,
      "Fe": 0.4
    }
  },
  {
    "id": "silicaSand",
    "label": "Silica Sand (SiO2)",
    "unit": "units",
    "description": "Primary glass precursor recovered from sorted rubble.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 2,
      "Si": 1,
      "Fe": 0
    }
  },
  {
    "id": "ironOre",
    "label": "Iron Ore (Fe2O3)",
    "unit": "units",
    "description": "Oxidized iron ore feedstock for metal processing.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 3,
      "Si": 0,
      "Fe": 2
    }
  },
  {
    "id": "waterIce",
    "label": "Water Ice (H2O)",
    "unit": "units",
    "description": "Frozen water extracted from asteroidal material.",
    "atomVector": {
      "H": 2,
      "C": 0,
      "O": 1,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "co2Ice",
    "label": "CO2 Ice",
    "unit": "units",
    "description": "Frozen carbon dioxide from volatile-rich rubble.",
    "atomVector": {
      "H": 0,
      "C": 1,
      "O": 2,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "carbonRock",
    "label": "Carbon Rock (~C)",
    "unit": "units",
    "description": "Carbon-rich rocky fraction used in refining.",
    "atomVector": {
      "H": 0,
      "C": 1,
      "O": 0,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "slagWaste",
    "label": "Slag / Waste",
    "unit": "units",
    "description": "Low-value residue from sorting and beneficiation.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 0,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "water",
    "label": "Liquid Water",
    "unit": "L",
    "description": "Melted water available for electrolysis and greenhouse use.",
    "atomVector": {
      "H": 2,
      "C": 0,
      "O": 1,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "hydrogenNeutral",
    "label": "Hydrogen (Neutral)",
    "unit": "atoms",
    "description": "Neutral hydrogen inventory for fuel chemistry.",
    "atomVector": {
      "H": 1,
      "C": 0,
      "O": 0,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "hydrogenIonized",
    "label": "Hydrogen (Ionized)",
    "unit": "ions",
    "description": "Ionized hydrogen plasma under containment.",
    "atomVector": {
      "H": 1,
      "C": 0,
      "O": 0,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "oxygenGas",
    "label": "Oxygen Gas (O2)",
    "unit": "moles",
    "description": "Oxygen output from electrolysis and photosynthesis.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 2,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "co2Gas",
    "label": "CO2 Gas",
    "unit": "moles",
    "description": "Refined carbon dioxide gas used in biology loops.",
    "atomVector": {
      "H": 0,
      "C": 1,
      "O": 2,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "carbon",
    "label": "Carbon (Refined)",
    "unit": "units",
    "description": "Refined carbon for steel and reduction chemistry.",
    "atomVector": {
      "H": 0,
      "C": 1,
      "O": 0,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "ironMetal",
    "label": "Iron Metal",
    "unit": "ingots",
    "description": "Reduced iron ready for structural alloys.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 0,
      "Si": 0,
      "Fe": 1
    }
  },
  {
    "id": "coGas",
    "label": "Carbon Monoxide (CO)",
    "unit": "moles",
    "description": "Byproduct gas from ore reduction in the furnace.",
    "atomVector": {
      "H": 0,
      "C": 1,
      "O": 1,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "glass",
    "label": "Glass",
    "unit": "panels",
    "description": "Manufactured glass from silica melt processing.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 6,
      "Si": 3,
      "Fe": 0
    }
  },
  {
    "id": "steel",
    "label": "Steel",
    "unit": "beams",
    "description": "Iron-carbon alloy for high-strength construction.",
    "atomVector": {
      "H": 0,
      "C": 0.05,
      "O": 0,
      "Si": 0,
      "Fe": 1
    }
  },
  {
    "id": "cellulose",
    "label": "Cellulose",
    "unit": "blocks",
    "description": "Biological polymer generated in the greenhouse.",
    "atomVector": {
      "H": 10,
      "C": 6,
      "O": 5,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "wood",
    "label": "Wood",
    "unit": "planks",
    "description": "Compressed cellulose structural material.",
    "atomVector": {
      "H": 50,
      "C": 30,
      "O": 25,
      "Si": 0,
      "Fe": 0
    }
  },
  {
    "id": "boxOfSand",
    "label": "Box of Sand",
    "unit": "boxes",
    "description": "Packaged silica stock for construction and bio-manufacturing demand.",
    "atomVector": {
      "H": 0,
      "C": 0,
      "O": 12,
      "Si": 6,
      "Fe": 0
    }
  },
  {
    "id": "steelIngot",
    "label": "Steel Ingot",
    "unit": "ingots",
    "description": "Standardized steel feedstock ready for downstream manufacturing.",
    "atomVector": {
      "H": 0,
      "C": 0.1,
      "O": 0,
      "Si": 0,
      "Fe": 2
    }
  },
  {
    "id": "energyCell",
    "label": "Energy Cell",
    "unit": "cells",
    "description": "Compact charged cell for mobile systems and station equipment.",
    "atomVector": {
      "H": 4,
      "C": 1,
      "O": 0,
      "Si": 0,
      "Fe": 1
    }
  },
  {
    "id": "galaxyBar",
    "label": "Galaxy Bar",
    "unit": "bars",
    "description": "Bio-engineered ration containing complete macro and micronutrient coverage.",
    "atomVector": {
      "H": 20,
      "C": 12,
      "O": 10,
      "Si": 0,
      "Fe": 0
    }
  }
] as const

export type ResourceId = typeof resourceCatalogData[number]['id']

export interface ResourceDefinition {
  id: ResourceId
  label: string
  unit: string
  description: string
}

export const resourceDefinitions: ResourceDefinition[] = resourceCatalogData.map((resource) => ({
  id: resource.id,
  label: resource.label,
  unit: resource.unit,
  description: resource.description,
}))

export const resourceById = resourceDefinitions.reduce<Record<ResourceId, ResourceDefinition>>((map, item) => {
  map[item.id] = item
  return map
}, {} as Record<ResourceId, ResourceDefinition>)

export const resourceIds = resourceDefinitions.map((item) => item.id)

export type AtomVector = Record<AtomSymbol, number>

export const atomVectors = resourceCatalogData.reduce<Record<ResourceId, AtomVector>>((map, resource) => {
  map[resource.id] = {
    H: Number(resource.atomVector.H),
    C: Number(resource.atomVector.C),
    O: Number(resource.atomVector.O),
    Si: Number(resource.atomVector.Si),
    Fe: Number(resource.atomVector.Fe),
  }
  return map
}, {} as Record<ResourceId, AtomVector>)

export interface AtomTotals {
  H: number
  C: number
  O: number
  Si: number
  Fe: number
}

export function zeroAtomTotals(): AtomTotals {
  return { H: 0, C: 0, O: 0, Si: 0, Fe: 0 }
}

export function computeAtomTotals(inventory: Partial<Record<ResourceId, number>>): AtomTotals {
  return resourceIds.reduce<AtomTotals>((totals, resourceId) => {
    const quantity = inventory[resourceId] ?? 0
    if (quantity === 0) {
      return totals
    }

    const vector = atomVectors[resourceId]
    totals.H += vector.H * quantity
    totals.C += vector.C * quantity
    totals.O += vector.O * quantity
    totals.Si += vector.Si * quantity
    totals.Fe += vector.Fe * quantity
    return totals
  }, zeroAtomTotals())
}

export function formatQty(value: number): string {
  if (Math.abs(value) >= 1000) {
    return value.toFixed(0)
  }

  if (Math.abs(value) >= 100) {
    return value.toFixed(1)
  }

  if (Math.abs(value) >= 10) {
    return value.toFixed(2)
  }

  return value.toFixed(3)
}
